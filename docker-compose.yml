# ---------- NOT USED RIGHT NOW. -------------------
version: "3.7"      
services:
    rumair_pmpro_sensor_api:
        build:
            context: ./
            cache_from:
                - golang:alpine:latest
                - quay.io/goswagger/swagger:latest
            #args:   //from dockerFile !
                #buildno: 1
            # 3.8 -> If you specify image as well as build, then Compose names the built image with the webapp and optional tag specified in image:
            #image: sensor_api:latest
            labels:
                com.example.description: "Accounting webapp"
            #container_name: sensor_api:latest
        volumes:
          #  - "/tmp:/usr/local/bin/RumAir_Pmpro_Sensors_API/swagger.json:ro"
            #- "C:/Users/dominik_pawlocki/compose:/usr/local/bin/RumAir_Pmpro_Sensors_API:ro"
            # - /c/Users/dominik_pawlocki/compose/:/home/
            - "swaggerDefFile:/home"
        ports:
            - "5000:81"
    swagger:
        image: swaggerapi/swagger-ui:latest
        depends_on:
            - rumair_pmpro_sensor_api
        ports:
            - "80:8080"
        volumes:
            - type: volume
              source: swaggerDefFile
              target: /etc/swagger
              volume:
                nocopy: true
# for sharing a file swagger.json made by build of api container !
volumes:
    swaggerDefFile:

# How to run swagger spec generator locally 
#You can put the following in a file called swagger.bat and include it in your path environment variable to act as an alias.
# echo off
# echo.
# docker run --rm -it --env GOPATH=/go -v %CD%:/go/src -w /go/src quay.io/goswagger/swagger %*

#then run :
#swagger generate .\swagger generate spec -o ./swagger.json
#swagger validate --stop-on-error ./swagger.json 